# 论文大纲

```java
彭老师提供模板
目录
1.前言	1
1.1 研究背景	1
1.2 研究的目的和意义	1
1.3 国内外研究现状	2
1.3.1 欧盟研究现状	2
1.3.2 美国研究现状	2
1.3.3 中国研究现状	2
1.4 文章的组织结构与安排	2
2. 系统开发环境搭建和相关技术介绍	5
2.1 系统开发环境	5
2.1.1 M2Eclipse插件介绍	5
2.1.2 Tomcat服务器介绍	5
2.1.3 搭建环境的步骤	5
2.2 WEB开发技术	6
2.2.1 B/S结构	6
2.2.2 JSP技术	7
2.3 SPRING开源框架	7
2.4 STRUTS2开源框架	8
2.5 HIBERNATE开源框架	9
2.6 ORACLE数据库技术	11
2.7 RFID技术	11
2.8 本章小结	12
3. 系统分析与总体设计	13
3.1 总体框架	13
3.1.1 系统结构设计	13
3.2 需求分析	14
3.2.1 技术可行性	14
3.2.2 经济可行性	14
3.2.3 操作可行性	14
3.3 系统功能模块分析	15
3.3.1 系统模块结构	15
3.3.2 养殖场模块	15
3.3.3 屠宰场模块	16
3.3.4 超市模块	17
3.3.5 消费者模块	17
3.3.6 监管者模块	18
3.4 程序结构	18
3.4.1 文件列表	18
3.4.2 项目结构	18
3.5 数据库设计	19
3.6 本章小结	22
4. 系统的详细设计与实现	23
4.1 服务端系统主要模块实现	23
4.1.1 登录页面实现	23
4.1.2 养殖场系统主界面的实现	24
4.1.3 养殖场系统仔猪录入功能实现	25
4.1.4 养殖场出栏信息录入的功能	27
4.1.5 屠宰场核验入场生猪的功能	28
4.1.6 超市分割肉信息录入功能	29
4.1.7 消费者查询信息功能	30
4.1.8 监管者管理角色信息功能	31
4.2 浏览器调用外设的功能实现	33
4.3 本章小结	34
5. 系统测试	35
5.1 测试方法介绍	35
5.2 测试环境	35
5.3 实例测试表	35
5.4 本章小结	36
6. 总结	37
致谢	39
参考文献	41
附录	43
```



```java
倪老师提供模板
目录
1 绪论	1
1.1顶板离层	1
1.2顶板离层仪的现状	1
1.3课题研究意义	1
1.4课题研究内容	1
2 方案设计	3
2.1整体方案设计	3
2.2主控芯片的选择	3
2.3 STM32F103简介	4
2.4 STM32F103芯片的优势	4
3 电路设计	7
3.1单片机最小系统	7
3.1.1 STM32主控芯片电路	7
3.1.2复位电路	8
3.1.3晶振电路	9
3.1.4 BOOT启动电路	10
3.1.5 SWD下载电路	10
3.2电源电路设计	11
3.2.1电缆电路	12
3.2.2电池升压/充电电路	13
3.2.3 稳压3.3V电路	16
3.3采集电路设计	17
图3.3.1电位器实物图	18
图3.3.2 AD采集电路	18
3.4存储电路设计	18
3.5唤醒电路设计	20
3.6数码管电路设计	21
3.6蓝牙通讯电路设计	23
4 软件设计	25
4.1 软件整体设计	25
4.2 初始化程序	28
4.2 数据采集程序	29
4.3 数据存储程序	31
4.4 数码管显示程序	33
4.5 蓝牙通信程序	34
5 电路调试与功能测试	37
5.1电源电路调试	37
5.2 STM32最小系统测试	38
5.3数码管显示测试	39
5.4蓝牙通信测试	39
5.5低功耗测试	40
6 总结与展望	43
6.1总结	43
6.2展望	43
致谢	45
参考文献	47
附录	49
```



```java
前言、绪论、介绍占20%，主体60%

摘要应概括课题的内容、方法和观点，以及取得的成果和结论，能反映整个内容的精华。中外文摘要以300字以内为宜。

正文内容包括：引言，国内外研究现状；基本概念和理论基础；模型的建立，实验方案的拟定；设计计算的方法和内容；实验方法、内容及其分析；理论论证、应用、结果以及讨论等。

前言应说明本课题的意义、目的、研究范围及要求达到的技术参数；简述本课题应解决的主要问题。

结论包括总结、所得结果与已有结果的比较和尚存在的问题，以及进一步开展研究的见解与建议。

致谢应以简短的文字对课题研究与论文撰写过程中曾直接给予帮助的人员(例如指导教师、答疑教师及其他人员)表示谢意。

```

>引言
>
>* 国内外研究现状；
>
>基本概念和理论基础；
>
>模型的建立，实验方案的拟定；
>
>设计计算的方法和内容；
>
>实验方法、内容及其分析；
>
>理论论证、应用、结果以及讨论等。
>
>



```java
毕业设计论文模板我也上传了3份，分别对应硬件、理论、软件的题目类型，大家可以参考其结构和格式，尽量少走弯路，起码格式要正确，后面不要因为格式问题而反复打印论文！另外，参考文献最好在10篇以上吧，多一些更好
倪老师 2020/4/23 16:14:12
论文页数，学校和学院没有明确要求，建议主干章节至少在40页以上。


同学们请注意：1、摘要分两段：
第一段：简要介绍项目的研究背景和意义；
第二段：详细说明项目采用什么技术，利用什么方法，实现了哪些功能，运行结果如何等。

2、参考文献15-20个为宜，需要在论文中标注引用。
3、图里的文字要比正文文字小。
彭老师

```



```java
硕士论文模板
目  录 
摘要…………………………………………………………………………………I 
目录………………………………………………………………………………III
1 绪论………………………………………………………………………………1 
1.1 课题的背景及意义………………………………………………………………1 
1.2 智能垃圾桶国内外研究现状……………………………………………………4 
1.3 课题研究内容及方法……………………………………………………………11 
1.4 本章小结…………………………………………………………………………12 
2 总体方案设计……………………………………………………………………13 
2.1 系统功能设计……………………………………………………………………13 
2.2 各模块方案选型…………………………………………………………………16 
2.3 本章小结…………………………………………………………………………19 
3 系统硬件设计与实现……………………………………………………………20 
3.1 系统硬件电路设计……………………………………………………………20 
3.2 微控制器模块电路设计………………………………………………………21 
3.3 电源控制模块设计……………………………………………………………24 
3.4 垃圾量检测模块设计…………………………………………………………25 
3.5 称重检测模块设计……………………………………………………………27 
3.6 温度检测模块设计………………………………………………………………28 
3.7 GPS 定位与通信模块设计……………………………………………………30 
3.8 语音提示模块设计………………………………………………………………30 
3.9 本章小结…………………………………………………………………………31 
4 系统软件设计与实现…………………………………………………………32  
4.1 软件设计流程分析……………………………………………………………32 
4.2 微控制电路、程序设计………………………………………………………33 
4.3 电源控制模块程序设计………………………………………………………33 
4.4 垃圾量检测模块程序设计……………………………………………………36  
4.5 称重检测模块程序设计………………………………………………………40 
4.6 温度检测模块程序设计………………………………………………………42 
4.7 GPS 与通信模块程序设计………………………………………………………45 
4.8 语音提示模块程序设计…………………………………………………………47 
4.9 本章小结…………………………………………………………………………50 
5 服务器软件与实现………………………………………………………………51 
5.1 服务器选型………………………………………………………………………51 
5.2 服务器程序设计…………………………………………………………………52 
5.3 本章小结…………………………………………………………………………56 
6 系统测试与实现…………………………………………………………………57  
6.1 系统测试方案……………………………………………………………………57 
6.2 微控制电路、程序测试…………………………………………………………59 
6.3 电源控制模块测试………………………………………………………………60 
6.4 垃圾量检测模块测试……………………………………………………………60 
6.5 称重检测模块测试………………………………………………………………62 
6.6 温度检测模块测试………………………………………………………………62 
6.7  GPS 与通信模块测试…………………………………………………………63 
6.8 语音提示模块测试………………………………………………………………63 
6.9 本章小结…………………………………………………………………………64 
7 总结与展望………………………………………………………………………65 
7.1 总结………………………………………………………………………………65 
7.2 展望………………………………………………………………………………65 
参考文献……………………………………………………………………………67 
作者简历……………………………………………………………………………71 
论文原创性声明……………………………………………………………………72 
学位论文数据集……………………………………………………………………73 
```



```java
	彭老师提供模板
    1.前言	1
    2. 系统开发环境搭建和相关技术介绍	5
    3. 系统分析与总体设计	13
    4. 系统的详细设计与实现	23
    5. 系统测试	35
    6. 总结	37

    倪老师提供模板
    1 绪论	1
    2 方案设计	3
    3 电路设计	7
    4 软件设计	25
    5 电路调试与功能测试	37
    6 总结与展望	43

    硕士论文模板
    1 绪论………………………………………………………………………………1 
    2 总体方案设计……………………………………………………………………13 
    3 系统硬件设计与实现……………………………………………………………20 
    4 系统软件设计与实现…………………………………………………………32 
    5 服务器软件与实现………………………………………………………………51 
    6 系统测试与实现…………………………………………………………………57  
    7 总结与展望………………………………………………………………………65 
    
    崔杯杯论文
    1 绪论………………………………………………………………………………1 
    2 总体方案设计……………………………………………………………………13 
    3 系统硬件设计与实现……………………………………………………………20 
    4 系统软件设计与实现…………………………………………………………32 
    5 系统测试与实现…………………………………………………………………57  
    6 总结与展望………………………………………………………………………65 
```





<font color="red">崔杯杯的论文大纲</font>

```java
目  录
摘要
目录
1 绪论
1.1 课题的背景及意义
1.2 智能垃圾桶国内外研究现状
1.3 课题研究内容及方法
1.4 本章小结
2 总体方案设计
2.1 系统功能设计
2.2 各模块方案选型
2.3 本章小结
3 系统硬件设计与实现
3.1 系统硬件电路设计
3.2 单片机最小系统电路设计
3.3 语音输入模块设计
3.4 舵机控制模块电路设计
3.5 上位机模块设计
3.6 蓝牙通信模块设计
3.7 电源控制模块设计
3.8 本章小结
4 系统软件设计与实现
4.1 软件设计流程分析
4.2 语音输入模块程序设计
4.3 舵机控制模块程序设计
4.4 上位机模块程序设计
4.5 蓝牙通信模块程序设计
4.6 电源控制模块程序设计
4.7 本章小结
5 系统测试与实现
5.1 系统测试方案
5.2 语音输入模块电路、程序测试
5.3 舵机控制模块测试
5.4 上位机模块测试
5.5 蓝牙通信模块测试
5.6 电源控制模块测试
5.7 本章小结
6 总结与展望
6.1 总结
6.2 展望
参考文献
```



```java
功能简介：
语音识别垃圾分类
STM32 + LD3320 + hc05 + 舵机 + 上位机

    使用LD3320语音识别模块进行语音识别后将识别指令通过UART发送给STM32单片机处理，然后控制语音播报模块进行播报回应属于什么种类的垃圾，同时根据垃圾种类驱动对应的舵机转动，hc05蓝牙传感器用于和电脑无线通信，上位机无线接收垃圾桶开关状态、开关次数、指令数。

```



```java
目  录
摘要
目录
1 绪论
1.1 课题的背景及意义
1.2 智能垃圾桶国内外研究现状
1.3 课题研究内容及方法
1.4 本章小结
2 总体方案设计
2.1 系统功能设计
2.2 各模块方案选型
2.3 本章小结
3 系统硬件设计与实现
3.1 系统硬件电路设计
3.2 单片机最小系统电路设计
3.3 语音输入模块设计
3.4 舵机控制模块电路设计
3.5 上位机模块设计
3.6 蓝牙通信模块设计
3.7 电源控制模块设计
3.8 本章小结
4 系统软件设计与实现
4.1 软件设计流程分析
4.2 语音输入模块程序设计
4.3 舵机控制模块程序设计
4.4 上位机模块程序设计
4.5 蓝牙通信模块程序设计
4.6 电源控制模块程序设计
4.7 本章小结
5 系统测试与实现
5.1 系统测试方案
5.2 语音输入模块电路、程序测试
5.3 舵机控制模块测试
5.4 上位机模块测试
5.5 蓝牙通信模块测试
5.6 电源控制模块测试
5.7 本章小结
6 总结与展望
6.1 总结
6.2 展望
参考文献
```

```java
摘要
	随着我国经济社会的飞速发展、城市规模的不断扩大，生活垃圾的产生量不断在增加，而且成分日益复杂。在这一背景下，垃圾分类问题逐渐成为人们关注的焦点，其中以城市生活垃圾的分类处理和资源化利用最为重要。生活垃圾分类对于城市良好生活环境的建立和资源最大化利用具有重要意义，而垃圾桶作为人们在生活中随处可见的环卫基础设施，随着垃圾分类的到来而得到越来越多的关注。在这个快速发展的时代，不仅分类垃圾桶正在普及，智能垃圾桶在很多城市也能看到。在我国，虽然各城市大都制定了垃圾分类的相关政策,但由于人们对于垃圾分类意思薄弱、分类知识欠缺等原因,导致实际分类效果并不理想。然而随着物联网技术、人工智能技术等的快速发展,使得智能化的垃圾分类成为国内外研究的热点。
	本设计以单片机STM32F103C8T6核心板为智能控制中心，结合LD3320语音识别模块、舵机控制模块、蓝牙通信模块、语音播报模块及其外围辅助电路，构成了一个集多种功能为一体的智能语音垃圾分类系统。
	语音识别智能垃圾分类器系统，是通过非特定语音识别技术结合STM32微处理器对垃圾进行智能分类的研究项目。本系统实现了智能语音识别垃圾种类、垃圾投放次数、垃圾桶开闭状态，并通过语音播报垃圾种类、开闭垃圾桶。用户可以通过语音的形式对生活垃圾进行分类投放。按照一定规定或标准将垃圾分为不同的种类，通过语音识别不同垃圾的种类开启相应垃圾箱进行垃圾的回收，并实时监测垃圾分类箱开闭状态与回收次数等数据，方便高效地对生活垃圾进行分类管理，达到垃圾分类投放的效果，提高垃圾的资源价值和经济价值，降低处理成本。
	本设计能实现语音识别垃圾种类、开闭垃圾桶回收垃圾，并将垃圾分类桶数据信息上传到电脑端。
	通过测试各个模块之间的接口是否正确、测试每个模块的程序设计是否有误、测试整个系统是否满足设计功能和性能的要求，保证了系统的稳定性与可靠性。
关键词：物联网；智能环卫；语音识别；智能硬件
```

```java
1 绪论
1.1 课题的背景及意义
	近年来，随着经济的飞速发展，城市生活垃圾总量也呈逐年增长的趋势，人们大量地消耗资源，大规模生产，大量地消费并产生更多废弃物，使得当今社会对于资源的可持续发展越来越重视。垃圾处理是社会的责任，不仅能使我们的生活环境更美好，也促进了资源的再生利用，从而造福于子孙后代。偌大中国，垃圾处理是否妥当有效，直接影响到全世界的环境。
	当今社会对于资源的可持续发展和再利用已经相当的重视。人们大量地消耗资源，大规模生产，大量地消费，又大量地产生着废弃物。随着经济的发展，城市生活垃圾总量也呈逐年增长的态势，如何使这些垃圾变废为宝，从而实现垃圾的资源化，垃圾分类回收是最好出路。许多发达国家的垃圾分类已经实行了几十年，而且效果明显。从2002年开始中国政府提倡垃圾分类收集，但是效果却不怎么理想。垃圾分类是习近平总书记高度重视的民生工程，2016年以来多次对垃圾分类作出重要指示。2019年，北京市第十五届人民代表大会常委会第十六次会议表决通过北京市人大常委会关于修改《北京市生活垃圾管理条例》的决定，新《条例》于2020年5月1日正式实施，为有效管理生活垃圾，切实提高生活垃圾减量化、资源化和无害化提供了法律依据，标志着垃圾分类迈入新阶段。
	要实现垃圾分类，各个城市首先要重视，要制定一套合理的垃圾分类回收系统，还要提高居民的环保意识。垃圾处理是社会的责任。对环境产生的影响，对子孙后代的好处。中国是个大国，垃圾处理得好坏影响到全世界的环境。只有从每家每户做起，才能从源头上做好这件事。
	“垃圾桶”做为人类生活中不可或缺的必需品，随着垃圾分类的到来一夜之间集万千关注于一身。从简易垃圾桶，到脚踏垃圾桶，再到现如今的分类环保垃圾桶、智能垃圾桶，可以看出垃圾桶的发展是社会文化的折射，也是人类文明的演变。垃圾桶经历了从原始户外垃圾桶的概念时代，简易垃圾桶雏形时代，户外垃圾桶普及户外垃圾桶普及时期，垃圾桶升级换代时期，户外分类式垃圾桶时代，智能垃圾桶初期时代，每个时期都各有特色。随着时代的进步，传统垃圾桶不再局限于功能性，更多偏向于视觉丰富，那一时期的垃圾桶会随着环境变化，出现各式各样的造型。
	尽管传统的户外垃圾桶在造型上比较丰富，功能却很单一，缺点也较明显，主要体现在：
（1）垃圾量检测效率低。传统垃圾桶里垃圾是否满桶并需要清运，一般是通过环卫工人定期巡检，满桶情况比较随机，不好把握，造成了环卫工人不必要的工作量。如果遇到很多垃圾桶同时满桶的情况，还会给环卫工人带来不小的工作压力。 
（2）垃圾桶出现自燃现象。夏季垃圾桶自然现象相对较多，高温下食物或其他物体腐烂发酵产生热量引燃可燃物，居民没有熄灭的烟头随手丢进桶内，都会导致垃圾桶的自燃，不仅污染城市环境，破坏环卫设施，更造成了安全隐患。
（3）垃圾桶因垃圾超重变形。很多垃圾桶由于受到材料、温度等因素的限制，特别是塑料环保垃圾桶，在长时间使用后不可避免的都会出现一些老化的现象，超过最大载荷会出现变形。若环卫工人没有及时清运垃圾，可能还会开裂并导致垃圾桶的报废，给环卫部门造成一定的经济损失。
	垃圾的处理是一个复杂的工作，为了解决传统垃圾桶存在的不足，实现垃圾处理的高效化、便捷化、低成本化，智能垃圾桶应势而生。随着世界经济的逐渐变迁，人们的环保意识逐渐增强，同时人们对于整洁的生存环境和对高质量成活品质的不断渴求，现今的垃圾桶，更是融环保与科技于一体，通过生活中的这些小细节，小转变，能把节能环保理念深入人心，整个社会周而复始、生生不息的发展，这也许就是智能垃圾桶的意义。
	合格的智能垃圾桶具有性能稳定、使用寿命长、使用方便、操作精准、设计精密、卫生环保、节能低耗等特点。智能垃圾桶，人们无需接触垃圾桶的任何部位即可投放垃圾，防止交叉感染，环保卫生，外形雅观；无需外接电源，使用普通电池，耗电低，使用寿命长；密封性能好，减少了生活中各种病菌交叉感染的机率，无垃圾异味溢出，确保四周空气清新。随着人们对生活质量的提升与科技的进步，单一功能的垃圾桶已经满足不了人们的需求，虽然垃圾桶的种类和数量在不断翻新和增加，但人们更加注重它的美观和实用性，并向着 “小巧”和“智能化”方向发展，垃圾智能管理系统的设计与实现是一项专业性很强的实用技术，以装载垃圾为基础功能，在保障适用性的前提下利用物联网与科学技术生成更加便捷、稳定、环保、智能的产品。如今，个别发达城市也出现了智能垃圾桶，不过由于造价高、布线繁琐、功能不稳定等原因没有被普遍认可。
	针对以上存在的问题，传统的垃圾桶不仅垃圾量检测效率低，存在大量的安全隐患，也为环卫工人的清理也带来了不便；而现阶段研究的智能垃圾桶又存在成本高，可靠性差，操作繁琐，功能单一的缺点。因此，研发出一款节能环保、功能齐全、稳定性高的智能垃圾桶已经成为了未来的发展趋势。本课题开发的智能垃圾桶不仅具备了传统垃圾桶投放垃圾的功能，也弥补了一些智能垃圾桶的不足，赋予了垃圾桶更多的功能，提高了环卫工人的工作效率，降低了安全隐患，同时节约了成本，真正做到了节能环保。因此，本课题具有巨大的经济效益和社会效益。
```

```java
1.2 智能垃圾桶国内外研究现状
1.2.1 国内研究现状
	七八十年代的简单式垃圾桶无论是在形状、材料，还是功能上，都比较单一，同时也是目前人们运用最广泛的垃圾桶。其中最早的垃圾桶，便是土坑型垃圾桶，其仅仅被人们作为一个能装纳垃圾的容器。随着人们对生活质量的关注，人们开始追求更加美观、运用更加便捷的垃圾桶，于是对传统垃圾桶进行了简单加工，逐渐出现了翻盖型、踩脚型、可翻转型垃圾桶。 
	九十年代初期简单分类垃圾桶的出现，让我国人民开始意识到了环保的重要性。这种垃圾桶由传统的一桶一体变化为多桶一体，可回收垃圾箱的设置为有回收价值的垃圾提供了循环利用的机会，提高了资源利用率；针对废旧电池格而另有的回收格设置，更是有效地减少了铅、汞、镉等有毒物质对环境的污染。垃圾桶逐渐由传统向美观化、便捷化、多功能化发展。 
	国内智能垃圾桶的发展与国外相比还存在着差距，因受经济的制约、科技的发展水平与国民素质等因素的影响，我国的垃圾桶造价低廉、易损坏、质量差，而就智能垃圾桶而言，出现的时间较晚，控制比较简单，功能比较单一，主要分为感应性垃圾桶、太阳能垃圾桶与商业广告垃圾桶。感应垃圾桶主要体现在红外线测距技术，或是超声波感应。若人们的手或垃圾接近垃圾桶口时，垃圾桶会自动开盖，待垃圾投入完毕后，垃圾桶桶盖又自动关闭，这种智能垃圾桶解决了用手直接接触垃圾桶盖和脚踩后才能扔垃圾的困扰，极大地减少了与细菌接触的几率，不仅卫生，也抑制了难闻气味的传播。然而这种垃圾桶功能比较单一，如果是将自动翻盖功能运用到一些公共的场所，脚踏式或是手动的这类没有任何智能控制系统的垃圾桶，却因其便捷性而更加受到人们的青睐。而且开关盖这功能机械耗损程度较高，有很大的改进空间。
	商业广告垃圾桶，虽然具有一定的商业价值，但没有真正意义上实现垃圾桶对于垃圾处理的功能，就目前的科技水平而言，智能化垃圾桶逐步实现社会和经济效益，包括提供wifi信号和USB接口手机充电。实时监测人流量，配置LED灯，配置LCD显示屏，自动报警功能等。商业广告垃圾桶所需电需要太阳能转换，但不是为处理垃圾功能所准备的，而是只为垃圾桶外的广告灯等商业需要功能提供电源所准备的，排线布线比较复杂。 
	综上所述，我国智能垃圾桶逐步实现社会和经济效益，包括提供wifi信号和USB接口手机充电。实时监测人流量，配置LED灯，配置LCD显示屏，自动报警功能等。垃圾桶的智能化虽已发展一段时间，但仍存在许多实际问题等待解决，例如：细菌堆积、容量有限、污水处理等。此时垃圾桶的智能化发展的目标必须逐步解决问题，已达到全面化发展。
```

```java
1.2.2 
    国外研究现状 
	垃圾的处理是一个复杂的工作，为了解决传统垃圾桶存在的不足，实现垃圾处理的高效化、便捷化、低成本化，智能垃圾桶应势而生。随着世界经济的逐渐变迁，人们的环保意识逐渐增强，同时人们对于整洁的生存环境和对高质量成活品质的不断渴求，现今的垃圾桶，更是融环保与科技于一体。垃圾桶的智能化发展与世界文明发展密切相关。据世界银行新报告《垃圾何其多2.0：到2050年全球固体废物管理一览》报告中指出，世界正在被淹没在垃圾之中，而垃圾产生率还会不断上升，垃圾处理问题将面领着巨大的挑战。由于人口增长和都市区的扩张，预计2016年至2050年间，垃圾排放量会增加70%。良好的废物管理对于建立循环经济至关重要。随着国家和地方政府接受循环经济理念，以智能和可持续的方式管理废弃物，将有助于促进经济的高效增长，同时最大限度地减少对环境的影响。为了实现垃圾处理的高效化、便捷化、低成本化，智能垃圾桶应势而生。随着人们环保意识的增强，对高质量生活的也在不断追求，现今的垃圾桶，不仅美观，更是融环保与科技于一体。垃圾桶的智能化发展与世界文明发展密切相关。
	2000 年后，随着垃圾产生率的不断上升，垃圾桶的作用也越来越大，在2006年8月，太阳能垃圾桶出现在了纽约街头。太阳能垃圾桶利用太阳能发电，把太阳能转化成电能，并驱动供给系统，此外将多余的电量存储到蓄电池中，解决了阴雨天气及夜晚没有太阳时的供电问题，环保节能，也不用担心意外断电的问题。这种户外太阳能垃圾桶不仅能在夜间为街道及小区照明，还能点亮LED显示屏贴放广告，达到宣传的目的，为城市形象加分。
	二十一世纪，随着自动感应技术的发展，智能垃圾桶的研究也进入了一个新的发展阶段。来自美国匹兹堡创业公司CleanRobotics研制了一款名为Transhbot的垃圾桶。Trashbot正是为了更方便地实现垃圾分类，它能够利用内置摄像头、金属探测及马达，传感器，区分人们投放的垃圾哪些可以回收再利用，哪些需要填埋，自动为垃圾进行分类投放，避免了人们因对垃圾分类知识的匮乏和垃圾分类意识的薄弱而把垃圾投错地方。目前Transhbot原型机功能还相对比较简单，能够区分可回收垃圾以及填埋处理垃圾。当检测到人靠近时，垃圾桶的入口会自动打开。垃圾投入后，通过传感器如金属探测器等，将垃圾分类投放。随着机器人时代的到来，各种传感器丰富了Trashbot的功能，使其越来越智能化，不过它的售价超过了5000美元，对于地方推广还是相当有难度。
	美国BigBelly Solar公司便发明了一种智能垃圾桶，这个名为BigBelly的垃圾桶集太阳能、物联网、高效压缩机为一体，通过垃圾桶顶部为垃圾桶提供电源，垃圾快倒满时，压缩机会在40秒内将垃圾的体积压缩至原来的五分之一，等到垃圾箱快满时又会自动联网发送垃圾桶已满及地理位置等信息至垃圾处理中心。然后处理中心的系统会根据各个垃圾桶发回的数据进行分析然后规划出最佳的回收路线和时间，再派出车辆将垃圾清理走。垃圾桶上的太阳能电池板，在室内可以插上直流电源进行供电，在室外可以用太阳能电池提供电源，最大输出功率可达30W。
	这款智能垃圾桶的售价并不便宜，价格在8000美元左右，但美国加州大学圣地亚哥分校使用这种智能垃圾桶之后大量降低垃圾回收频率，从而可以减少大量的垃圾回收车和工作人员及维护成本，可以让整体成本降低 85%左右，且一个垃圾桶还将由此减少52吨二氧化碳的排放。因为是封闭式垃圾桶，所以苍蝇、蚊子、猫狗乱翻的情况减少很多，垃圾桶的异味也有所缓解。因此，目前西雅图大学、Brown大学也在开始引入这种垃圾桶。
	2013年，悉尼大学留学生白林松、萨姆·约翰逊（Sam Johnson）给悉尼街头的垃圾桶覆盖900个LED灯泡，让扔垃圾变成俄罗斯方块游戏，不光吸引人的目光，也让人自愿完成扔垃圾的动作。实际上，除了为垃圾桶安装LED灯泡外，他们还为垃圾桶加装了传感器，能够检测到有东西从桶口扔下来，此时他们就会把扔进来的垃圾虚拟成俄罗斯方块中的“方块”往下掉。和我们小时候玩过的俄罗斯方块一样，如果方块堆在底部正好填满了所有的空隙，那么那部分的方块就会全部“消失”。垃圾桶设计一个反馈系统，有助于改善环境，当人们扔垃圾进去的时候，反馈系统能够告诉他们自己对环境的贡献有多大。
	除此之外，“游戏化”的方式能让人更加自愿、自觉地把垃圾扔进垃圾桶里。这个高科技垃圾桶摆放在街道上，还可以预测天气、站点提醒、显示公交列车时间等等，可以说是个多功能便民设施。
	通过研究现状可以看出国内外学者对垃圾桶的“智能化”做了大量研究，如何实现其社会效应和经济效应，降低制造成本，也必将成为智能化垃圾桶的改进趋势。就目前的科技水平而言，智能化垃圾桶实现的社会和经济效益有： 
（1）提供wifi信号和USB接口手机充电，虽然流量费用不断降低，5G 时代也即将到来，但是垃圾桶作为城市中分布最广的公物，作为无线网络基站仍然是其的发展趋势，这不仅方便了人们的生活，同时也降低了人们的上网成本，其中的社会和经济效益显而易见； 
（2）实时监测人流量，为城市交通规划提供数据； 
（3）配置LED灯，减少安装路灯的费用，同时可以为城市夜景添彩； 
（4）配置LCD显示屏，LCD显示屏作为商业广告的载体，其中取得的效益是长期性的，这可以作为智能垃圾桶成本回收的一个途径，具有良好的经济效益，当然，LCD显示屏也可以为大众服务，可以滚动播出热点新闻，天气预报，股市行情，公益广告等有益大众的信息。配置LCD显示屏是智能垃圾桶发展的必然趋势。
（5）自动报警功能。智能垃圾桶向效益化和收益化发展。
	有些智能垃圾桶已经投入了使用，但结合现实发展，并不是贴上了“智能化”标签的垃圾桶都能被人们接受，需要不断优化与改进。本课题研究的低成本、高效率、多功能控制系统的智能垃圾桶，具有重要的实用价值和研究价值。
```



```java
1.3 
    课题研究内容及方法
1.3.1 
    研究内容 
（1）研究系统对语音指令信息的读取与语音特征信息的提取；
（2）确定微处理系统与PC端通信选型；
（3）研究系统检测数据发送至服务器；
（4）研究系统投递检测、关键词语匹配、蓝牙通信、语音输出以及电机驱动功能的程序。
1.3.2 
    研究方法 
	本系统的设计流程为：确定智能垃圾分类器功能——确定相关微处理芯片型号并设计结构——绘制电路图——编写程序——调试。
（1）确定智能垃圾桶功能。通过阅读相关文献，总结现阶段国内外智能垃圾桶的研究现状，系统的搜集和整理相关资料，对智能垃圾桶在城市基础设施发展规划中的作用意义进行分析，尤其是城市垃圾箱的使用现状、设计研发与运行模式等方面的应用探索展开研究，最终确定智能垃圾桶的功能；
（2）确定相关微处理芯片型号并设计结构。通过实际研究，依据科学理论和实践的需要提出设计传感器型号，并结合专业理论知识与垃圾桶实际应用情况，选择合适的传感器并设计结构。通过专家咨询、资料分析等途径了解垃圾桶实际需求，让功能的实现更为合理化；
（3）绘制电路图。根据选择的微处理芯片型号与预设功能，设计电路图。电路图制作使电路直观化、形象化，对于固定电路的优化布局起重要作用；
（4）编写程序与调试。根据电路功能，编写软件程序，包括主程序总体流程图，系统控制算法设计和数据、信号处理。最后，对信息系统的各种模块的测试和确认测试，包括测试每个模块的程序是否有错误、测试模块之间的接口是否正确、测试整个软件系统是否满足设计功能和性能的要求。通过与系统的需求相比较，所开发的系统与设计需求基本一致。
	基础理论知识学习与认知主要是指有针对性的对现阶段大数据理论技术的应用情况以及城市垃圾箱的现状模式进行概况学习认知；相关技术调研与归纳是指结合大数据理论技术的运行需要，考虑城市垃圾箱运行过程中牵扯变动的有效数据类型选择相应传感技术和部件，通过实地考察、专家咨询、资料分析等途径了解相关运用要求，让功能的实现更为合理化；设计调研分析与总结是要探讨大数据时代城市垃圾箱设计研发的理论依据、规划更为高效智能的城市垃圾箱运行模式，最终提出智能化、高效化的城市垃圾箱设计方案。
	1.4
    本章小结
	本章主要介绍了智能垃圾桶的研究背景，并通过分析传统垃圾桶、现阶段智能垃圾桶的优缺点，明确了课题研究的意义，为本次论文打下基础。同时，通过研究国内外智能垃圾桶的现状，对我国现在使用的智能垃圾桶有了比较清晰地了解，为本次设计指明了方向，确定了主要研究内容及设计优点，明晰了研究流程，为后续工作的进行做好了准备。


本文共分六章，首先介绍了论文的研究背景、价值意义、研究目标和研究内容；然后对需求进行分析并讨论了系统的软硬件总体设计；接下来讨论了本系统开发过程中涉及到的关键技术；第三章和第四章分别详细介绍了系统硬件和软件的设计与实现；最后进行测试和总结，讨论了已经完成的工作和后续任务。
第一章 绪论，本章介绍了论文的研究背景和意义，并对本论文相关的研究现状做了分析和总结，还介绍了论文的研究目标和内容。主要介绍了智能垃圾桶的研究背景，并通过分析传统垃圾桶、现阶段智能垃圾桶的优缺点，明确了课题研究的意义。同时，通过研究国内外智能垃圾桶的现状，为本次设计指明了方向，确定了主要研究内容及设计优点，明晰了研究流程，为后续工作的进行做好了准备。
第二章 总体方案设计，本章从用户角度出发，分析用户的对本系统的功能需求，并讨论了硬件和软件的总体设计方案。主要通过智能垃圾桶的功能要求深入分析，对系统整体工作流程进行设计。在此基础上，参照设计需求与实际应用情况，完成了智能垃圾桶各模块可实现的功能介绍，并对各模块方案进行选型，形成了智能垃圾桶总体方案的设计。
第三章 系统硬件设计与实现，本章详细介绍了系统的硬件电路的设计，给出电路设计原理图，并详细作了说明。根据第二章总体结构设计的基础上对智能垃圾桶各个模块进行硬件设计，根据智能垃圾桶的功能要求，确定了智能垃圾桶的硬件设备及模块型号。经过硬件的设计，对智能垃圾桶总体框架和流程目的有了更加清晰的认识，为接下来软件的设计打下一定的基础。
第四章 系统软件设计与实现，本章先介绍系统主程序流程，而后对两个子模块分别层次化地进行介绍，给出关键代码以及程序流程图。在硬件选型完成基础上对系统软件进行了设计，包括主程序总体流程图，系统控制算法设计。主程序总体流程的设计是软件编程非常重要的组成部分，它以流程框架的形式，使系统软件的编写更加清晰且富有条理性。
第五章 系统测试与实现，本章描述了对整个系统进行整体调试的步骤和结果，分别测试了语音识别的准确率以及各个功能的正常运行。在系统嵌入式软件、系统硬件已经确认的基础上，进行系统的各种模块的测试和确认测试，包括测试每个模块的程序是否有错误、测试模块之间的接口是否正确、测试整个软件系统是否满足设计功能和性能的要求。
第六章 总结与展望，本章对全文进行总结，并指出后续工作任务。
```


##### 总体方案设计

```java
2 
    总体方案设计
2.1 
    系统功能设计
2.1.1 
    设计要求
	本课题的目的是设计一款多功能、高效率、经济实用、便捷可靠的智能垃圾
桶，因此在设计过程中需要遵循以下几点要求：
（1）便捷可靠
设计不能只有外表，必须从实际出发，兼顾市场需求，更要从使用者的需要入手。
（2）经济实用
在节约型社会中，我们必须要考虑产品的节能环保及可持续性因素，在智能垃圾管理系统不影响它的使用性能的基础上，从器件选择和程序优化上控制功耗，从而节约能源。
（3）低成本
选择性价比高的元器件、优化程序、创新方案等方法都可以降低系统成本，减轻普通家庭及环保部门的经济压力。
2.1.2 
    系统组成
	本系统包括：单片机最小系统模块，语音识别模块，舵机控制模块，无线通信模块，语音输出模块，电源控制模块，投递检测模块。
	非特定的人发出语音经过LD3320语音识别模块转化成特定字符串再通过串口发送到STM32微控制器。STM32微控制器接收到语音识别的模块传来的预先设置好的指令后发送到指定舵机控制器，实现舵机的转动。舵机根据传来的指令的不同来实现垃圾的自主分类。系统结构图如下：
	

2.1.3 
    系统各模块功能实现
(1)主控制电路模块。根据设计的需求，选择一款性能与外设接口能够满足系统要求的微控制处理器，同时也需要考虑成本与功耗等因素，主控制电路是整个系统的核心部分。
	STM32系列微控制器是基于ARM Cortex-M系列32位Flash处理器，是基于专为要求高性能、低成本、低功耗的嵌入式应用专门设计的。STM32系列微控制器，具有高性能、实时响应、可进行数字信号处理、低功耗与低电压操作等特性，集成度高且易于开发，特别适用于中小设备的应用，尤其适合微型设备、仪表和其他电子产品的应用。
(2)语音识别模块。语音识别是系统最重要同时也是最基本的功能，该功能使得用户可以通过语音的形式对生活垃圾进行分类投放。语音识别功能简化了垃圾分类流程，方便了用户对垃圾的分类投放和分类处理。分析比较多个嵌入式语音识别的方案，并从中选取一个满足系统要求的方案，设计出相应的语音识别硬件电路。
	实现过程：
	智能语音垃圾分类器系统集成非特定语音识别模块，系统供电后语音识别模块启动。当系统监听到用户说出的唤醒关键词后，给予用户反馈信息，同时继续监听用户输入。当用户说出垃圾名称时，模块对语音进行录入操作。
	语音识别的基本流程主要可分为三个部分组成。首先把通过MIC输入的声音进行频谱分析，对语音信号进行其语音特征值的提取，然后是通过模式匹配的算法进行对所获取的语音特征值进行识，并和关键词语列表中的关键词语进行对比匹配，找出得分最高的关键词语作为识别结果输出。
	当语音的模拟信号输入之后，通过多个处理过程，将其转化为数字信号，然后基于语音顿的方法开始获取语音特征值，从而便可形成待匹配的语音模式。紧接着这些待匹配的语音数字信号便开始与系统中的语音模板进行匹配，匹配结束之后，系统会将最接近的匹配结果反馈给用户。
(3)舵机控制模块
	舵机的工作原理是由接收机或者单片机发出信号给舵机，其内部有一个基准电路，产生周期为20ms，宽度为1.5ms的基准信号，将获得的直流偏置电压与电位器的电压比较，获得电压差输出。经由电路板上的IC判断转动方向，再驱动无核心马达开始转动。
	实现过程：
    将舵机与STM32微处理器进行连接。编写控制代码，控制舵机转动的角度。本系统使用到舵机模块的地方是垃圾分类桶入口控制模块。入口控制模块通过舵机控制垃圾桶入口的开关，根据识别到的垃圾种类，主控制电路模块通过舵机控制垃圾收集桶的旋转角度。
(4)无线通信模块
	无线通信采用蓝牙技术实现。蓝牙模块是集成了蓝牙功能的PCB板，可实现短距离数据的无线收发，一般的蓝牙模块包括片上无线处理器、数控振荡器、片内射频收发开关切换装置以及嵌入式微控制器等。
	实现过程：
	系统蓝牙传输模块是通过扩展板上的USART串口实现。设计蓝牙传输模块驱动时要对USART串口进行初始化，通过STM32微控制器上对应的GPIO引脚，配置相关的中断，使USART串口在接收到数据后能产生相应的数据中断。模块初始化成功后即可通过蓝牙串口发送数据，向PC端发送采集到的相关数据。
(5)语音输出模块
	智能垃圾桶内置语音提示模块，系统具有语音提示功能，对相应的操作提供语音提示，如“您好”、“可回收垃圾”、“厨余垃圾”、“其他垃圾”等。内置的语音提示模块，可以将语音识别模块识别到的垃圾分类信息以语音的方式播放出来，具有良好的人机交互体验。
(6)电源控制模块
	为了保证整个系统能够正常稳定地工作，一个设计合理的电源电路是系统十分重要的组成部分。该系统的供电方式为交流电供电，各个模块采用统一的电源供电方式，以保证供电的稳定性。
```

```java
2.2各模块方案选型
2.2.1微控制模块
作为嵌入式硬件部分的“大脑”，主控芯片的选择应该从性能、性价比等诸多因素考虑。主控芯片选型将对比以51为核心的STC15F2K60S2系列单片机，以FPGA为核心技术的EP2C8Q208CN8，以ARMCortex-M为内核的STM32F103C8T6芯片，分析总结选型方案。
（１）STC15F2K60S2系列单片机简介
宏晶公司在2012年推出STC15F2K60S2系列单片机。该系列单片机为加强型8051内核，因此运行速度比传统的8051内核快10倍左右，最高可达30MHz。拥有60KB FLASH程序存储器，1KB数据闪存存储器，2048个字节的静态随机存取存储器（SRAM）。该系列中STC15F2K60S2-30I-LQFP44单片机为工业级芯片，其工作温度范围在-40℃~+85℃，不仅如此其灵活可选的管脚封装数量和形式，小巧的外观，低廉的成本受到行业内青睐，并在低成本系统中应用广泛。
（２）EP2C8Q208CN8简介
EP2C8Q208CN8为Altera公司推出的一款现场可编程门阵列（FPGA），拥有8256个逻辑单元，18个18x18乘法器，两个锁相环，用户可用I/O数量高达182个。其电源可选用3.3V、2.5V、1.2V等，满足低功耗要求。FPGA技术在运算速度、数据逻辑处理能力上是其他同类型芯片无法比拟的，因此该芯片被广泛应用在汽车电子、光学测试等领域。
（３）STM32F103C8T6处理器简介
STM32F103C8T6是STMicroelectronics公司推出的一款基于ARMCortex-M内核的32位微控制器。其程序存储器是可擦除式闪存存储器（FLASH），容量达64KB，RAM容量为20Kx8，运行速度高达72MHz。不仅如此，其丰富的外设资源也是该芯片的一大亮点，具备三个通用定时器，两组SPI通信接口，两组I2C接口等。同时该芯片采用工业级芯片设计，工作温度范围达-40℃~+85℃，精简的48管脚贴片封装。工作电压范围为2.0V~3.6V，拥有睡眠唤醒、低功耗等模式。
	通过介绍分析以上三款不同公司生产的处理器，可以得知，STC15F2K60S2系列单片机虽然管口精简，成本低廉，拥有工业级芯片的标准，但是运算速度、外设数量不能满足系统需求；EP2C8Q208CN8具备髙速运算能力，数据处理能力强，但是操作复杂，管口过于庞杂，且不符合工业级标准要求；STM32F103C8T6处理器不仅外设丰富，是一款工业级芯片，管脚精简而且运算速度快，可以搭载操作系统，符合本系统嵌入式硬件MCU的要求。
```

```java
语音识别模块
本项目中人机交互方向的语音识别应用系统部分，目的是实现基于开方式环境的语音识别智能化人机交互，具体需要实现下功能：
（１）实现不同年龄、性别语音的识别功能，即非特定人语音识别；
（２）保持较高的识别准确率；
（３）可以进行对长句的识别，使得说话人交互更加自然；
（４）丰富的语料库和关键词列表；
（５）动态添加识别指令，并且不得有烧写程序之类的反复过程；
（６）能够与上位机自由交互，并将识别命令实时传送给上位机系统；
	为了可以在任何场景进行语音识别，满足开方式环境下的特定需求，而且不受网络信号强弱限制，并且尽可能小的占用CPU资源等这些条件，本文选择非特定人语音识别系统。它的优势在于：无须训练，识别快速没有延时。但是缺点在于存储命令太少，更改匹配指令列表的过程复杂（需要烧写程序）。
	目前主流的专口用来进行语音识别的芯片主要有三种。分别是ICRoute公司的LD3320，凌阳公司的SPCE061A和科大讯飞的XFS5152CE等。
凌阳公司的SPCE061A是一种16位控制芯片，拥有专口针对处理语音信号的能力，可完成对于特定人语音识别训练和识别的功能。
科大讯飞的XFS5152CE是于2013年推出的主要用作语音合成的轻量级芯片，其语音识别的命令存储不能超过30条。
ICRoute公司推出的LD3320芯片是基于关键词语列表的识别芯片，尤其在对于非恃定人和中文识别领域非常成熟，并且存储量也相对么前的比较大，是一种接近为自然语音识别的专用芯片。
因此在权衡上面三种芯片的几种条件之后，本文选用LD3320芯片进行开发，以此为语音识别的专用芯片设计相关的能够满足需求的语音识别交互系统。
```

```java
无线通信模块
蓝牙模块是集成了蓝牙功能的PCB板，可实现短距离数据的无线收发，一般的蓝牙模块包括片上无线处理器、数控振荡器、片内射频收发开关切换装置以及嵌入式微控制器等。
系统选用HC-05作为系统蓝牙模块。HC-05芯片内部集成了2.4GHz接收器，基带控制器、RF功率控制吕以及其他外围的接口。该芯片符合蓝牙1.2协议规范，支持HCI、SDP、RFCOMM等多种蓝牙协议栈，可以工作在保持、通信和休眠三种工作状态，支持点对多点，点对单点的主从关系通信网构架，可广泛应用于多种单片机系统，使用非常灵活、方便。
舵机控制模块
舵机是一种可以控制角度的伺服驱动器，用于控制垃圾收集桶的开关旋转角度。由于垃圾收集桶模型需要舵机带动的模块总体重量较轻，舵机的扭矩无需过高，选择最为基本和常见的用于航模和机器人设计的舵机即可满足需求。
SG90是常用的小型舵机，其价格便宜、体积小巧并且易于操作。该舵机的扭矩为1.2~1.4kg/cm，在没有外加负载的情况下，每转动1°需要0.002s，旋转角度可以达185°左右，具有1024个角度级别，角度控制的精度约为0.18°。该模块可以正常工作在-30~+60℃的温度范围内。
语音输出模块
本系统具有语音提示功能，对相应的操作提供语音提示，如“您好”、“可回收垃圾”、“厨余垃圾”、“其他垃圾”等。语音播放采用JQ8400语音模块，其集成一个专门采用硬解码的方式进行音频编解码，保证语音播放的音质。芯片通过Micro-USB口连接到电脑时，SPIFLASH直接模拟成Ｕ盘，把预先录制好的.MP3、.wav等音频文件拷贝进入即可播放，使用时灵活方便。
电源控制模块
硬件电路设计中，电源电路的设计是个重要环节，是各电路模块能否正常工作的甚石。在进行电源设计时，最基本的要求是稳定可靠，不仅要关注所选择芯片是什么类型的电源芯片、电压输入范围、最大的输出电流和工作环境等技术参数，还要关注电源芯片在复杂条件下的可靠性，保证了系统能在某些复杂条件下能够正常工作。基于上述的电源模块选择原则，结合驱动器的供电需求，采用直流5V2A电源适配器，以满足驱动器的电源系统。

```

```java
2.2.8
    最终方案
（1）微控制器模块：选用单片机STM32F103C8T6。
（2）语音识别模块：选用LD3320语音识别专用芯片。
（3）舵机控制模块：选用SG90伺服电机。
（4）无线通信模块：选用HC-05蓝牙无线通信模块。
（5）电源控制模块：选用直流5V2A电源适配器。
（6）语音输出模块：选用JQ8400 MP3播报芯片。
2.3
本章小结
本章主要通过智能垃圾桶的功能要求深入分析，对系统整体工作流程进行设计，绘制出了整体逻辑流程图。在此基础上，参照设计需求与实际应用情况，完成了智能垃圾桶各模块可实现的功能介绍，并对各模块方案进行选型，对比分析后最终确定了选型方案，形成了智能垃圾桶总体方案的设计，为智能垃圾桶总体设计奠定了基础。
```



```java
3
系统硬件设计与实现
3.1
系统硬件电路设计
本设计硬件系统包括微电脑控制芯片、LD3320语音识别模块、伺服电机控制模块、HC-05蓝牙无线通信芯片、JQ8400 MP3播报模块等部分。本系统构建的意义在于，通过语音识别不同垃圾的种类开启相应垃圾箱进行垃圾的回收与处理，并实时监测垃圾分类箱的数据，方便高效地对生活垃圾进行分类管理，达到垃圾分类投放的效果，提高垃圾的资源价值和经济价值，降低处理成本。
控制部分功能如下：
主控（MCU）：单片微型计算机，处理语音识别数据、系统状态、通信等任务。
语音识别：识别用户语音信息，匹配垃圾分类信息，返回垃圾分类结果。
电源开关：可以根据需求打开或关闭系统。
语音输出：在识别到垃圾种类信息后，将语音识别模块识别到的垃圾分类信息以语音的方式播放反馈给用户。
舵机控制：主控芯片通过控制伺服电机转动进而驱动垃圾桶打开与关闭。
直流电源：为整个系统提供稳定可靠的供电。
指示灯：系统工作状态信息可通过指示灯的状态体现出来。
无线通信：系统与PC机通信，将垃圾分类结果和垃圾桶工作状态信息发送给计算机。

系统功能：
（1）系统能量来自于直流电源供电系统。使用直流电源供电，不仅简单方便，而且可靠稳定，能够满足系统的供电需求。
（2）通过主控芯片控制各个模块的工作，实现垃圾分类的智能化处理。
（3）语音输出用于和用户交互，反馈垃圾分类信息，提高用户体验。
（4）使用蓝牙技术进行无线通信，获取系统相关数据信息。
（5）系统内置LED指示灯，能实时展现系统状态。
（6）通过舵机驱动设备根据指令控制垃圾桶的开闭，进而方便实施垃圾分类投递。
（7）系统可以监测垃圾桶开闭状态与开启次数等信息，通过分析这些信息，能够获取垃圾桶工作状态，以及垃圾桶存储情况，方便工作人员根据统计情况进行统一处理。

```

```java
3.2
    微控制器模块电路设计
    本设计采用意法半导体公司的STM32F103C8T6处理器为主控制器。它是一款基于Cortex-M3的32位处理器。运算处理速度快，可以实时处理传感器采集上来的各种数据，并且主控制器和蓝牙模块连接，利用串口将数据实时发送到系统后台，在电脑端可以实时显示设备的整体状态。它是整个控制系统核心。

3.1.1
    Cortex-M3简述
Cortex-M3是基于低功耗、低门数、短中断延时和低成本调试的ARMV7架构的32个核心。它致力于需要快速中断响应的深层嵌入式应用，包括微控制器、汽车和工业控制系统。它采用尾链中断技术，采用完全硬件基础上中断处理，最大12个时钟周期数可以减少（ARM724-42个周期需要），实际的应用70%中断可以减少。ARMCortex-M3采用哈佛结构选择适合MCU应用的三层流水线，增加了分支预测功能。调试采用单线调试（单行）技术，用一个引脚调试，节省调试工具的费用。
3.1.2 
    STM32F103处理器介绍
STM32系列是意法半导体基于Cortex-M3核的微控制器，以M3内核为基础增加了高性能的外围设备。与普通8位单片机相比，在价格，性价比，开发难等方面有优势。
3.1.3
    STM32F103C8T6单片机简介
    STM32作为意法半导体的32位微控制器随着后缀名不同也代表着不同的含义。STM32F103C8T6中，F表示此款单片机为通用型；103代表着此款单片机为ARMCortex-M3内核的增强系列；C表示单片机共有48个引脚；8则代表单片机中的高速存储器为64KB；C代表着引脚封装为LQFP封装；6表示单片机正常工作的温度范围为工业级零下四十摄氏度到八十五摄氏度。
STM32F103C8T6主要参数：
（1）开发板的主要参数如下：
（2）型号：STM32F103C8T6
（3）封装类型：LQFP
（4）引脚个数：48
（5）内核：Cortex-M3
（6）工作频率：72MHz
（7）存储资源：64K Byte Flash, 20K Byte SRAM
（8）接口资源：2*SPI, 3*USART, 2*IIC, 1*CAN, 37*I/O
（9）数模转换：2*ADC（12位/16通道）
（10）调试下载：支持JTAG/SWD接口调试下载，支持IAP
	作为嵌入式系统的核心硬件设备，STM32F103C8T6上将搭载嵌入式系统，系统完成垃圾分类信息的采集、存储和上传等功能，将处理过的数据信息通过无线通信技术在电脑上显示。
	STM32F103C8T6的最小系统电路主要分为相互关联的五个部分。分别为：为系统提供能量，保证系统发送的指令能够准确执行的电源电路；处理存储器与处理器之间通讯关系的时钟电路；当系统出现故障后，对内部寄存器和数据存储器进行初始化操作的复位电路；系统开始工作时，通知微处理器中数据存储位置的启动电路；当程序设计好后，通过通讯转换为机器识别的语言后下载入存储器中的下载电路。这五部分与微处理器STM32F103C8T6共同组成垃圾分类系统中最简单的硬件电路。
	
	晶振是由石英晶体组成的，石英晶体之所以能当为振荡器使用，是基于它的压电效应：在晶片的两个极上加一电场，会使晶体产生机械变形；在石英晶片上加上交变电压，晶体就会产生机械振动，同时机械变形振动又会产生交变电场，虽然这种交变电场的电压极其微弱，但其振动频率是十分稳定的。
	晶振电路为主控芯片提供系统时钟，所有的外设工作，CPU工作都要基于该时钟，类似于整个系统的“心跳节拍”。晶振分为无源和有源，但是本质上都是皮尔斯震荡电路（反相放大器+电阻+电容+晶体+电源），只不过对于单片机而言，单片机内部集成了反相放大器和电阻以及电源，外接晶体和电容就可以了，这里的晶体就称之为无源晶振。而有源晶振是将皮尔斯振荡器作成一个整体，直接加电源即可工作。
	主控芯片是低电平复位(引脚NRST)，硬件按键复位属于系统复位之一(另外还有软件复位，看门狗计数终止复位等)。其中的电容C2的目的是按键消抖，防止在按键刚刚接触/松开时的电平抖动引发误动作(按键闭合/松开的接触过程大约有10ms的抖动，这对于主控芯片I/O控制来说已经是很长的时间，足以执行多次复位动作。由于电容电压不会突变，所以采用电容滤波，防止抖动复位误动作)。
```

##### 3.2 语音识别模块电路设计

```java
3.2
    语音识别模块电路设计
3.2.1
    
嵌入式语音识别框架
本文主要通过研究基于专用嵌入式识别芯片，设计相关的功能和模块，从而实现具体的需求。嵌入式语音识别系统主要由MCU主控芯片、专用语音识别芯片、识别列表以及说话人语音采集等几个主要模块组成。
（１）核也控制器：用来控制专用语音识别芯片的主控芯片，可以对其编程实现相关功能，本文采用的是通过蓝牙无线通信的方式与上位机进行通讯。主控芯片种类主要有51单片机、STM系列、ARM系列等，本文采用的是STM32系列单片机作为核心控制单元。
（２）语音采集：用来采集语音信号的一个模块，并将采集来的语音模拟信号经过端点检测，去噪等预处理之后变为数字信号，目的是为了对数字信号进行特征提取模式匹配得到最终的识别结果。
（３）识别列表：作为离线语音识别最具特征性的一个模块。因为有别于在线识别，它拥有庞大的语音识别库可以通过网络进行调用，而离线识别都是将识别命令临时存放在识别列表中，与识别芯片的识别结果进行匹配从而得到匹配度最高的识别结果反馈给用户。
３．４．２
LD3320芯片识别原理
LD3320语音识别芯片使用的技术是基于“关键词语列表”的自动语音识别技术。芯片工作原理如图所示。芯片在启动语音识别时MCU需要先设置关键词语列表，每个关键词语由拼音串组成，如“ni hao”。设置好关键词语列表之后，芯片通过麦克风采集语音信号，然后转换为频域，进行频谱分析。接着从转换好的数据中提取出语音特征，传递给语音识别器。语音识别器会与关键词语列表中的每项的特征进行比对，最后找出最相似的一条。最后将识别结果传递给MCU。

（用户在使用前将需要识别的指令按照数字序号和拼音字符串对应的格式，写入主控芯片的ROM中，每次识别时，主控芯片会将这些识别指令列表按顺序写入芯片寄存器中，芯片将每次语音信号处理并且识别之后，再与关键词列表中的“候选”指令进行匹配，匹配度最高的即被认为是识别结果，并反馈给单片机。单片机再将识别结果返回给上位机。）

芯片所采用的非特定人语音识别技术，是语言学家利用语言建模技术，在对近百Ｇ的中文语音数据分析后建立起的中文语音数学模型，经过数以万计的取样训练，提取样本语音中基元语音细节特征及其之间的差异，再取统计概率最优的每个关键的基元语音特征，最后算法工程师将研究结果的语音数学模型及算法应用到芯片中。
    LD3320芯片特性
    LD3320芯片是ICRoute公司设计并且生产的，针对非特定人的语音识别专用芯片。它在设计上注重节能高效，自带FLASH、RAM，并且可以通过单片机进行直接控制。
LD3320识别芯片的主要特征主要包括以下几个方面；
（１）拥有快速并且稳定的识别算法和优化，不需要用户反复训练声音模型，便可以进行针对非特定人的语音识别；
（２）不需要外接芯片，该识别态片也自带了一定容量的存储模块和寄存器，也集成了模数转换模块。真正实现了单芯片便能够完成整个识别工作。
（３）单片机与芯片的交互主要是通过对芯片寄存器读写的过程来实现。只需要设定好需要识别的指令文本，写入芯片，LD3320芯片便可执行识别和结果匹配，从而反馈相关结果。
（４）芯片在内部已经设置了16位的模数／数模转换器和功放电路。提供麦克风、喇叭的相关接口，可以通过插拔或者焊接方式进行连接。
（５）芯片支持了对于软件和硬件的串行和并行两种时序的读写方式，用户可以根据需要自己选择。
（６）芯片具备休眠功能，在一定程度实现了节约能源的功能。
（７）工作电压为3.3V，方便携带。
ICRoute公司仍在不断推出新一代产品，芯片的性能也将变得更加卓越，主要可以体现在抗噪距离更远、识别准确率更好。此外还配备了语音信号的音频输出。
	LD3320与MCU通信方式
作为硬件平台中最为核也的模块之一，语音识别芯片LD3320与主控芯片之间主要是通过对功能寄存器进行读写的过程。LD3320的寄存器分别支持了软件、硬件的串行SPI读写方法、软件模拟并行读写、硬件并行读写这四个读写方式。
本文使用的是并行的软件模拟时序。当准备好读写的地址之后，在并行读写时序中，我们令A0等于1，分别对CSB拉低和对WRB拉高来写入地址；当A0等于0时，我们令CSB拉低和将RD拉高来读入数据。
需要注意的是在这种读写方式下单片机的MD管脚需要拉低。此时DELAY_NOP有关部件会有较长时间的延时，这会影响对）x37寄存器进行写入数据的操作，芯片此时也会受干扰导致工作不正常。在进行识别工作时，0x37寄存器是开始控制芯片工作的入口，从而启动芯片识别的运算和整个识别流程。
```

##### 无线通信

```java
无线通信
蓝牙（Bluetooth）是一种短距离通信的无线电技术，目前己在现代生活中很多领域有广泛的应用，其发明之初希望为设备间通讯建立统一规范的标准化协议，以解决用户在互不兼容的移动电子设备间互联互通的问题，省去传统的外部电线。蓝牙采用从下至上的标准分层式结构，系统构成有三个部分，其中无线射频单元负责数据和语音的发送和接收；基带或链路控制单元进行射频信号与语音或数字信号的相互转化；链路管理单元负责管理蓝牙设备之间的通信，实现链路的建立、验证、链路配置等操作。除此之外还有最重要的蓝牙协议规范，蓝牙协议规范主要包含三部分，传输协议，包括底层传输协议和高层传输协议，负责设备间位置确认及建立和管理其间的物理链路；中介协议，为高应用协议或程序提供必要的链路支持，为应用提供不同标准接口；应用协议，指协议栈上应用软件及相关协议。
HC-05模块是一个易于使用的蓝牙SPP(串口协议)模块，设计用于透明的无线串行连接设置。HC-05蓝牙模块可以在主配置或从配置中使用，使其成为无线通信的一个伟大的解决方案。该串口蓝牙模块是完全合格的蓝牙V2.0+EDR(增强数据速率)3Mbps调制，具有完整的2.4GHz无线电收发信机和基带。它使用具有CMOS技术和AFH（自适应跳频功能）的CSR Bluecore 04外部单芯片蓝牙系统。
引脚说明
（1）EN：它是使能引脚。当该引脚悬空或连接至3.3V时，模块使能。如果该引脚连接到GND，则模块被禁用。
（2）+5V：这是用于连接+5V的电源引脚。由于模块具有板载3.3V稳压器，因此需要提供+5V电源。
（3）GND：是接地引脚。
（4）TX：它是UART通信的发送器引脚。
（5）RX：它是UART的接收引脚。
（6）STATE：这是一个状态指示器引脚。当模块未连接任何设备时，此引脚变为低电平。当模块与任何设备配对时，此引脚变为高电平。

规格说明
（1）高达+4dBm的RF发射功率
（2）低功耗1.8V操作，1.8V至3.6V I/O
（3）具有可编程波特率的UART接口
（4）默认波特率：38400
（5）默认自动上电连接到最后一个设备
（6）允许配对设备默认连接
（7）自动配对PIN码：默认为0000
（8）由于超出连接范围而断开连接时，在30分钟内自动重新连接
	
```

```java
舵机控制模块
舵机可以通过程序连续控制其转角，主要是由外壳、电路板、无核心马达、齿轮与位置检测器所构成。本系统使用SG90舵机作为垃圾桶收集模块控制器。将SG90舵机与微处理器相连，控制舵机转动的角度。其工作原理是由STM32单片机发出信号给舵机，其内部有一个基准电路，产生周期为20ms，宽度为1.5ms的基准信号，将获得的直流偏置电压与电位器的电压比较，获得电压差输出。经由电路板上的IC判断转动方向，再驱动无核心马达开始转动，透过减速齿轮将动力传至摆臂，同时由位置检测器送回信号，判断是否已经到达定位。适用于那些需要角度不断变化并可以保持的控制系统。当电机转速一定时，通过级联减速齿轮带动电位器旋转，使得电压差为0，电机停止转动。一般舵机旋转的角度范围是0度到180度。
SG90舵机模块的连接方式。该舵机具有３个引脚：VCC是供电引脚，工作电压范围为4.8~6V，采用５Ｖ电压供电；SIG连接STM32数字引脚用于舵机旋转角度和速度的控制；GND是接地或者电源负极引脚。
```

##### 语音输出模块

```java
语音输出模块
语音输出模块对用户相应的操作提供语音提示，如“您好”、“可回收垃圾”、“厨余垃圾”、“其他垃圾”等。语音播放采用JQ8400语音模块，其集成一个专门采用硬解码的方式进行音频编解码，保证语音播放的音质。芯片通过Micro-USB口连接到电脑时，SPIFLASH直接模拟成Ｕ盘，把预先录制好的.MP3、.wav等音频文件拷贝进入即可播放，使用时灵活方便。
模块特征
（1）支持MP3 WAV硬件解码
（2）支持FAT文件系统
（3）24位DAC输出内部采用DSP硬件解码，非PWM输出，动态范围支持90dB，信比85dB
（4）多种控制模式、两线串口模式、一线串口控制
（5）支持SPIFLASH模拟成U盘，直接像操作U盘一样更新SPIFLASH里的语音
（6）支持系统深度睡眠，睡眠后电流低至600微安，可以通过一线串和指令IO唤醒
（7）支持30级音量调节
（8）支持采样率（KHz）:8/11.025/12/16/22.05/24/32/44.1/48
    JQ8400语音模块选用的是SOC方案，集成了一个16位的MCU，以及一个专门针对音频解码的ADSP，采用硬解码的方式，更加保证了系统的稳定性和音质。小巧尺寸更加满足嵌入其它产品的需求。此芯片最大的优势在于能够灵活的更换SPI-flash内的语音内容，省去了传统语音芯片需要安装上位机更换语音的麻烦，SPIFLASH直接模拟成U盘，跟拷贝U盘一样，非常方便。使得产品研发和生产变得便捷简单。一线串口控制模式、RX232串口控制可选，为研发提供更多的选择性。
    
功放驱动电路采用8002A音频功放IC。8002A为一颗高保真的音频功放IC。工作在2.0V~5.5V的输入电压下。其内部共有２个运放工作，第一个运放增益可在外部用R8和R7/R24两个电阻进行设置，而第二个运放的增益则固定不变。第一个运放的输出信号实际上是第二个运放的输入信号，而且两个运放产生的信号幅值相同，相位相反。因此8002A增益为：AVD=2X(R8/R7)。C32、C34电容为隔直电容，避免直流分量流入喇叭，防止磁饱和损坏线圈，C37、c39、c31可以滤除差模、共模干扰，增强音质效果。
要实现语音输出，需要经过语音芯片的驱动任务和控制两个主要过程。在语音芯片的驱动任务中，首先将串口波特率设置为 9600。然后使能语音模块与单片机所连接的引脚，接下来是使能串口使其可以发送接收，至此驱动任务完成。
```

```java
3.9 
    本章小结
根据第二章总体结构设计的基础上对智能垃圾桶各个模块进行硬件设计，结合自身所学专业知识及实践操作，根据智能垃圾桶的功能要求，确定了智能垃圾桶的硬件设备及模块型号。根据实际要求完成垃圾桶硬件选型并阐述不同组态层中硬件执行的功能。经过硬件的设计，对智能垃圾桶总体框架和流程目的有了更加清晰的认识，为接下来软件的设计打下一定的基础。
```

#####   系统软件设计与实现

```java
4 
    系统软件设计与实现
    4.1 软件总体设计思想
整个系统单独有硬件是无法完成运转，必须要有软件设计，软件设计思想是系统的灵魂，关系到整个系统的协调运作。
本系统的软件设计包括对垃圾分类检测与控制系统软件的设计，语音识别软件设计和蓝牙无线通信软件的设计。语音识别检测系统是整个系统设计的核心。
本控制系统的软件设计运用自底向上的设计方法。自底向上的设计方法从基础部分开始，凭借着经验和技巧，通过对其进行连接，修改和扩大，构建所需要的完整系统。这种设计方法是从底层开始，实际使用中设计成本和开发周期都比自顶向下法优；但是由于设计是开始于底层，所以没办法保证设计的最优性能，如器件的不共用。根据需求完成对各项子系统的单独编程和调试，再对各个模块分别调试成功，然后再将各模块功能拼接一起，从而组成对智能温室系统的软件设计。
 软件设计流程分析
    微控制处理器STM32从上电/复位状态之后，最开始执行的是设备初始化程序，完成微控制处理器的初始化和各个外设的初始化。
    
4.2.2
    Keil uVision5编译工具介绍
本设计编程软件为Keil uVision5简称KEIL5版本，uVision是一个KEIL公司开发的集成开发环境。Keil MDK它是德国知名软件公司Keil开发的微控制器软件开发平台。
最新的Keil MDK5依然提供了编译器、编译器、安装包和调试跟踪，主要新增包管理器功能，支持LWIP，其SWD接口下载速度也是上一代产品的5倍，同时MDK5与之前版本不同，由MDK核心和软件包两部分构成KeilMDK5，其中MDK核心要包含集成开发环境uVision5 IDE和5代ARM编译器，软件包相对独立，可以在MDK核心不更换的情况下，单独对设备支持包和中间件进行管理和更新包，KEIL5对Cortex-M、Cortex-R4、ARM7和ARM9系列器件完美支持，集成开发环境，仿真环境和调试器，并内置ARM C/C++编译工具链，给代码开发带来了极大方便。
    
4.1 
    5.1.1
STM32标准外设库介绍
STM32标准外设库是一个固件函数包，它由程序、数据结构和宏组成，包括了微控制器所有外设的性能特征。该函数库还包括每一个外设的驱动描述和应用实例，为开发者访问底层硬件提供了一个中间API，通过使用固件函数库，开发者无需深入掌握底层硬件细节，就可以应用每一个外设。因此，使用固态函数库可以大大减少用户的程序编写时间，进而降低开发成本。每个外设驱动都由一组函数组成，这组函数覆盖了该外设所有功能。每个器件的开发都由一个通用API驱动，API对该驱动程序的结构，函数和参数名称都进行了标准化。
   
    
4.2 
    微控制电路、程序设计    
STM32作为意法半导体的32位微控制器随着后缀名不同也代表着不同的含义。STM32F103C8T6中，F表示此款单片机为通用型；103代表着此款单片机为ARMCortex-M3内核的增强系列；C表示单片机共有48个引脚；8则代表单片机中的高速存储器为64KB；C代表着引脚封装为LQFP封装；6表示单片机正常工作的温度范围为工业级零下四十摄氏度到八十五摄氏度。

本设计采用意法半导体公司的STM32F103C8T6处理器为主控制器。它是一款基于Cortex-M3的32位处理器。运算处理速度快，可以实时处理传感器采集上来的各种数据，并且主控制器和蓝牙模块连接，利用串口将数据实时发送到系统后台，在电脑端可以实时显示设备的整体状态，它是整个控制系统核心。


```

##### 4.4 语音识别模块程序设计

```java
4.4 语音识别模块程序设计
基于LD3320的语音识别系统是一个可很好体现人机交互便捷性的系统，不仅在于有比较稳定的识别效果，同时还体现了离线识别的优势和很好地规避了其缺点。
其中开始主要是几个主要模块的初始化工作，将芯片LD3320进行初始化，将单片机与计算机之间的串口通讯进行配置，主要内容包括设置串口序列，将波特率设置为19200，数据位设为8位，停止位是1位，流控和奇偶校验位都是无，并旦数据的接受和发送格式都是以ASCII的格式进行。
初始配置结束之后，开始进入正常的运行工作，其中主要是一次正常的识别流程，识别流程中主要的识别步骤就是单片机读取存入的识别指令，然后将其写入识别芯片寄存器中，识别芯片会进行匹配工作，再将结果反馈给单片机。整个工作流程中，为了实现不通过烧写程序进行改写命令内容的功能，加入了一个中断功能，可以随时进行命令的修改，该功能主要是通过IIC总线协议进行实现的，在该功能开始执行时，内部的主程序全部停止等待该功能的执行结束。从而更新识别列表，单片机会再次将该列表读给芯片，同时芯片也会进行识别，再开始匹配，开始正常的识别工作。
```

```java
3.6 语音输出模块程序设计
语音播报模块采用串口通信技术驱动, 只需一个RXD脚和TXD脚即可完成通信部分。模块采用5V直流电源供电, 额定电流为100mA, 待机电流为2mA。在非语音播放时, 属于低功耗元器件, 且扬声器无杂声。
要实现语音输出，需要经过语音芯片的驱动任务和控制两个主要过程。在语音芯片的驱动任务中，首先将串口波特率设置为 9600。然后使能语音模块与单片机所连接的引脚，接下来是使能串口使其可以发送接收，至此驱动任务完成。
本系统采用JQ8400语音输出模块，其集成一个专门采用硬解码的方式进行音频编解码，保证语音播放的音质。芯片通过Micro-USB口连接到电脑时，SPIFLASH直接模拟成Ｕ盘，把预先录制好的.MP3、.wav等音频文件拷贝进入即可播放，使用时灵活方便。其功放驱动电路采用8002A音频功放IC。8002A为一颗高保真的音频功放IC。工作在2.0V~5.5V的输入电压下。其内部共有２个运放工作，第一个运放增益可在外部用R8和R7/R24两个电阻进行设置，而第二个运放的增益则固定不变。第一个运放的输出信号实际上是第二个运放的输入信号，而且两个运放产生的信号幅值相同，相位相反。因此8002A增益为：AVD=2X(R8/R7)。C32、C34电容为隔直电容，避免直流分量流入喇叭，防止磁饱和损坏线圈，C37、c39、c31可以滤除差模、共模干扰，增强音质效果。
```

```java
3.4 
    无线通信模块程序设计
    系统蓝牙传输模块是通过扩展板上的USART串口实现。设计蓝牙传输模块驱动时要对USART串口进行初始化，使能STM32F103C8T6微控制器上对应的GPIO引脚，配置相关的中断，使USART串口在接收到数据后能产生相应的数据中断。模块初始化成功后即可通过蓝牙串口发送数据，向PC端平台发送采集到的相关数据。
    HC-05的所有功能都是通过AT指令集控制实现的，比较简单，在设置相应的AT指令后，即可工作于相关状态。AT指令的结构为：AT+<CMD><=PARAM>，其中CMD（指令）和PARAM（参数）都是可选的，需要注意的是在发送末尾添加回车符（\r\n），否则模块不会响应。在进入AT指令模式前，应拉高KEY引脚；退出AT模式，则拉低KEY引脚。AT指令是初始化指令，AT+UART是串口配置指令，AT+ROLE是主从设备配置指令，AT+INQ是RSSI测量指令。
    本系统蓝牙模块采用HC-05，是一款高性能主从一体的蓝牙串口模块，可看做是一个蓝牙转串口的设备，在知晓串口编程知识情况下即可使用，实现了透明传输。
HC-05有一个LED灯，可以通过闪烁间隔判断蓝牙模块工作状态。未连接配对的正常工作状态是每一秒闪烁两次；己连接配对的正常工作状态是隔一秒闪烁两次；AT模式是每两秒闪烁一次。按住HC-05正面圆形按键的同时给蓝牙模块通电，LED常亮后规律性闪烁即进入AT模式。模块默认波特率为9600，8位数据位，1位停止位，无奇偶校验，可利用蓝牙串口助手自行设置设备的名称和配对密码，设置完成后即可进入正常的通信模式。
蓝牙模块代码主要包括4个函数：
（1）HC05_Init函数，该函数用于初始化与ATK-HC05连接的IO口，并通过AT指令检测ATK-HC05蓝牙模块是否已经连接。
（2）HC05_Get_Role函数，该函数用于获取ATK-HC05蓝牙模块的主从状态。
（3）HC05_Set_Cmd函数，该函数是一个ATK-HC05蓝牙模块的通用设置指令，通过调用该函数，可以方便的修改ATK-HC05蓝牙串口模块的各种设置。
（4）HC05_CFG_CMD函数，该函数专为USMART调试组件提供，专用于USMART测试ATK-HC05蓝牙串口模块的AT指令，在不需要USMART调试的时候，该函数可以去掉。

本章小结
本章在硬件选型完成基础上对系统软件进行了设计，包括主程序总体流程图，系统控制算法设计。主程序总体流程的设计是软件编程非常重要的组成部分，它以流程框架的形式，使系统软件的编写更加清晰且富有条理性。同时，对各个模块也进行了剖析和必要的文字说明，成了清晰地编译思路并给出了典型程序代码。本章通过对软件系统的分析，化整为零，在一定程度上，降低了软件编程的难度，也增加了我完成本次系统设计的信心。
```

##### 系统测试与实现 

```java
6 
    系统测试与实现 
6.1 
    系统测试方案
    在完成软件和硬件设计之后，需要对系统的整体进行测试。测试是产品从设计研发到生产过程中非常重要的环节，决定产品的质量。测试的目的是为了验证设计的合理性，完善系统功能，提高产品稳定性，保证软件流程的正确性。只有通过科学系统地测试才能快速、准确地发现问题。
	系统整体设计完成后，先对系统中的各个模块进行测试，而后对系统整体进行可靠性测试及相应的数据分析。
首先编写相应的测试程序，对系统中使用到的STM32F103C8T6微控制器、LD3320语音识别模块、HC-05蓝牙通信模块进行单独测试，对其敏感特性进行分析。而后，将STM32F103C8T6微控制器、LD3320语音识别芯片、HC-05蓝牙模块、JQ8400语音播报模块、SG90舵机控制模块等硬件连接在一直，用蓝牙与PC机连接通信。通过Jlink/SWD调试接口在系统芯片上进行测试，对输出的USART串口信号和GPIOA引脚信号与仿真结果比较，分析系统语音识别及蓝牙传输数据的准确性和系统的可靠性，不断修改系统的代码直到系统可用。
6.2 
    微控制电路、程序测试
    5.2.2  系统硬件测试 
通过J-LINK接口，将编译得到的HEX程序执行文件烧写至STM32F103C8T6系统扩展板上，复位系统并进行数据采集，验证系统运行的可靠性和实时性。 


```

```java
５．３．２
识别指令的测试实验
语音识别指令的测试实验测试了识别指令的字节长短是否对识别效果有影响，测试系统是否能够很好地在保持交互自然的前提下仍旧控制一定的识别准确率，这是非常重要的一项指标。为此做了相关实验，一共选择10条不同长度的预存识别指令，对于每条指令的识别率进行统计，看是否能够达到识别精确度的要求。根据测试结果我们不难看出，针对非特定人的语音识别系统可以保持较为良好的语音识别效率进行对不同语音识别指令的识别效果。当然，随着识别指令的长度增加，识别效率也有相应的影响，但是仍在可接受的识别效率范围内，这点是需要再继续改进的地方。
５．３．３
识别时间的对比测试
本文研究并设计的是基于嵌入式硬件平台的离线语音识别智能垃圾分类器系统，相比还有基于云存储、服务器语料库的在线识别系统，本文为了体现该系统在离线环境下的特殊优势，以及在户外多变环境下的适应能力，做了两个不同系统的对比实验，该实验主要是想通过对５个相同的识别指令，分别使用本文设计的离线识别系统和科大讯飞云语音识别两者进行对比实验，主要比较的是两者识别时间的长短。同样该５个识别指令也有不同的字节长短。从测试结果我们可以看出，基于硬件平台的离线识别系统对相同识别指令的识别时间较为明显地少于基于云存储的线上语音识别系统，而且本文的识别系统更可以基于无网络环境下的语音识别，更加适合在户外环境下的语音识别。
５．３．４
系统抗噪实验
在该实验中，我们需要针对户外的特殊环境进行对抗造性能进行测试。我们通常会用信噪比（SNR）这个概念来衡量噪声的干扰程度。在本次实验中，我们加入了噪声信号，因此信噪比的值就是音频信号的平均值与噪声的比值。当然随着信噪比的值越高，也就表示全局环境就越适合语音识别，因此根据不同信噪比，我们对该硬件系统进行了测试。本实验是在每个信噪比下，通过对３个识别指令，每条指令进行10次重复识别，然后将识别率取平均值。从测试结果中我们可以明显的看见随着信噪比值的增大，系统的识别效率也有着明显的提高，但是在噪声环境非常大的情况下，系统的识别效率还是有所不足，需要进行改进。
```

```java
蓝牙无线通信模块测试
系统中，HC—05蓝牙模块为STM32F103C8T6主控芯片与电脑上位机之间提供了无线通信渠道。系统可以通过蓝牙模块向电脑平台终端上位机发送实时的气压与温度数据。为测试蓝牙模块与上位机通信时数据传输是否稳定可靠，使用相应的软件，向主控芯片的蓝牙串口模块注入测试数据，定时向电脑上位机发送，在电脑端平台上位机上使用相应的串口助手去检验数据的一致性。测试数据使用PC端串口助手来设定，XCOM串口助手软件通过PC端串口向STM32F103C8T6主控芯片注入测试数据，主控芯片通过USART串口向蓝牙模块发送测试数据，蓝牙模块按设定好的频率向连接到的蓝牙设备发送测试数据。XCOM串口助手设置通信波特率为9600，每秒向STM32F103C8T6主控芯片发送一次测试数据，查看PC端能否正常接收。
```

```java
6.8 
    语音输出模块测试
    语音输出模块使用的一个外围电路非常简单的JQ8400语音芯片，其硬件部分基本无需调试，调试仅为程序部分：将预先编写的程序烧写进单片机，调用相关语音播放程序接口播放对应地址的语音内容，若播放没有问题表示此模块功能调试完毕，如果不能播放或者播放错误，则需要对各数据脚和手册进行对照。
    实际使用发现语音内容无法正确播放，查看使用手册，说明延时函数的延时时间不够精确，脉冲宽度太小则无法被芯片准确识别，修正后模块可正常使用、语音内容正确播放。
```



```java
6.9
本章小结
本章在系统嵌入式软件、系统硬件、外设等元素已经确认的基础上，进行系统的各种模块的测试和确认测试，包括测试每个模块的程序是否有错误、测试模块之间的接口是否正确、测试整个软件系统是否满足设计功能和性能的要求。通过与系统的需求相比较，所开发的系统与设计需求基本一致。在调试过程中，也发现了程序编写中的一些漏洞与错误，经过改进，完善了软件系统的编程，提高了可靠性。

```

```java

7总结与展望
7.1总结
	本次设计的语音识别智能垃圾分类器系统具有了语音识别，垃圾分类检测、语音播报、舵机控制、无线通信功能。经查阅资料，了解到国内生产的智能垃圾桶的种类普遍比国外的少，且功能也比较单一，国外对垃圾桶的研究相对较早、较深入。通过研究现状可以看出国内外学者对垃圾桶的“智能化”做了大量研究，有些智能垃圾桶已经投入了使用，但结合现实发展，并不是贴上了“智能化”标签的垃圾桶都能被人们接受，需要不断优化与改进。而本次设计正是针对这些不足完成了一项低成本、高效率、多功能控制系统的智能垃圾桶的设计，具有重要的实用价值。
	本次设计是在查阅网上资源和相关文献资料，研究了国内外智能垃圾桶现状对其有了一定认识的基础上，对比国内外同类产品，获得了有价值的信息，最后确定适合系统的设计方案，设计思路为：确定智能垃圾桶功能、确定相关芯片型号并设计结构、绘制电路图、编写程序、调试。
	本次设计的智能垃圾桶系统主要实现了语音识别控制垃圾分类处理，本文主要的研究内容与取得的成果如下：
	（1）通过系统控制算法设计和数据、信号处理，本系统实现了语音识别检测、智能检测垃圾种类进行垃圾分类，并做对应语音提示。
	（2）通过无线通信技术把系统数据推送至PC端，方便相关工作做统计分析处理；
	（3）通过测试每个模块的程序是否有误、测试模块之间的接口是否正确、测试整个软件系统是否满足设计功能和性能的要求，保证了产品的可靠性与稳定性。
	最后，由于自己知识水平有限，软件编程能力不足，本次设计与研究的智能垃圾桶控制系统还有很多不足的地方，测试中暴露出来一些设计的缺陷，比如语音识别准确率不高，蓝牙通信不稳定，在复杂环境下系统功能不稳定等，最终也都在反复调试的过程中成功解决。
	7.2展望
	本论文已经完成了对语音识别智能垃圾分类器的设计与研究工作，在设计过程中涉及多个学科领域，基本上能够实现最初设定的功能。随着人们需求的不断提升、科技日新月异的发展，本系统还有很多需要后续研究的方向：
	（1）本次所设计与研究的智能垃圾桶还有很多功能有待添加，比如对垃圾的自动分类、自动拾取、对垃圾进行压缩使垃圾桶的空间得到有效利用等。
	（2）考虑利用现已大力发展的IOT或5G网络技术，以实现数据的实时、快速传输。
	（3）使用目前最热门的人工智能技术，将智能垃圾桶的反馈数据进行分析，最终将获取到垃圾类型的占比、人们的生活方式，从而分析获得减小垃圾排放的措施。
	现如今快速发展的时代，不仅分类垃圾桶正在普及，智能垃圾桶在很多城市也能看到，很大程度地方便了环卫工人的清理与相关工作者的管理，其中蕴含的管理系统与专业技术要求比较严格也比较高，特别是人人都提倡绿色环保的时代，智能垃圾桶的出现无疑成为了社会的一大趋势，在今后的学习中我会更加深入探究，不断探索与完善。
```



​	



```java
(单片机最小系统模块，语音识别模块，舵机控制模块，无线通信模块，语音输出模块，电源控制模块。)

(备用)
舵机控制模块
舵机也叫伺服电机，最早用于船舶上实现其转向功能，由于可以通过程序连续控制其转角，主要是由外壳、电路板、无核心马达、齿轮与位置检测器所构成。
本系统使用SG90舵机作为垃圾桶收集模块控制器。将SG90舵机与微处理器相连，控制舵机转动的角度。其工作原理是由STM32单片机发出信号给舵机，其内部有一个基准电路，产生周期为20ms，宽度为1.5ms的基准信号，将获得的直流偏置电压与电位器的电压比较，获得电压差输出。经由电路板上的IC判断转动方向，再驱动无核心马达开始转动，透过减速齿轮将动力传至摆臂，同时由位置检测器送回信号，判断是否已经到达定位。适用于那些需要角度不断变化并可以保持的控制系统。当电机转速一定时，通过级联减速齿轮带动电位器旋转，使得电压差为0，电机停止转动。一般舵机旋转的角度范围是0度到180度。
SG90舵机模块的连接方式。该舵机具有３个引脚：VCC是供电引脚，工作电压范围为4.8~6V，采用５Ｖ电压供电；SIG连接STM32数字引脚用于舵机旋转角度和速度的控制；GND是接地或者电源负极引脚。

本系统具有语音提示功能，对相应的操作提供语音提示，如“您好”、“可回收垃圾”、“厨余垃圾”、“其他垃圾”等。语音播放采用JQ8400语音模块，其集成一个专门采用硬解码的方式进行音频编解码，保证语音播放的音质。芯片通过Micro-USB口连接到电脑时，SPIFLASH直接模拟成Ｕ盘，把预先录制好的.MP3、.wav等音频文件拷贝进入即可播放，使用时灵活方便。


蓝牙（Bluetooth）是一种短距离通信的无线电技术，目前己在现代生活中很多领域有广泛的应用，其发明之初希望为设备间通讯建立统一规范的标准化协议，以解决用户在互不兼容的移动电子设备间互联互通的问题，省去传统的外部电线。蓝牙采用从下至上的标准分层式结构，系统构成有三个部分，其中无线射频单元负责数据和语音的发送和接收；基带或链路控制单元进行射频信号与语音或数字信号的相互转化；链路管理单元负责管理蓝牙设备之间的通信，实现链路的建立、验证、链路配置等操作；除此之外还有最重要的蓝牙协议规范：
１）传输协议，包括底层传输协议和高层传输协议，负责设备间位置确认及建立和管理其
间的物理链路；
２）中介协议，为高应用协议或程序提供必要的链路支持，为应用提供不同标准接口；
３）应用协议，指协议栈上应用软件及相关协议；
蓝牙设备使用无线电波连接手机或电脑端，两台设备需先配对成功后才可进行交流，交流在临时网络中进行，当网络环境创建成功后，一台设备作为主设备，所有其他设备作为从设备。蓝牙技术主要特点有：
１）功耗低，成本低；
２）装置微型模块化，易采用；
３）具有很好的抗干扰能力；
４）数据传输速率高，传输距离远；
５）设备之间数据传输无需复杂设定；
６）使用全世界通用的2.4G ISM频段，在世界范围内无须许可即可使用，技术广泛普及。

方案1：STC89C52RC是CMOS8位微控制器，增强型8051单片机，片上集成512字节RAM，具有6时钟/机器周期和12时钟/机器周期两种选择。工作时电压有两种：5.5V～3.3V或者3.8V～2.0V，为用户提供了多种选择机会。同时，在单芯片上，拥有灵巧的8位CPU和在系统可编程Flash，使得STC89C52RC为众多嵌入式控制应用系统提供高灵活、超有效的解决方案。
方案2：STM32F103C8T6是ST公司推出的Cortex-M3内核32位微处理器。他的内部资源较STC89C52RC多，基本上接近于计算机的CPU，程序模块化、接口简单，功能、工作速度快，而STC89C51的自身功能少,需要外围元件多,要求对电子熟悉；STM32F103C8T6相对于STC89C52RC，外围接口功能更加强大、更加丰富，接口相对简单，工作速度更快。主要表现在：
（1）内核：STM32F103C8T6单片机为ARM公司的M3内核处理器，STC89C52RC是使用上个世纪的51内核，虽然是经过改进的增强型，但是指令集不同，处理速度也差很多。且前者是32位处理器，后者是8位处理器，速度差很多，处理位宽也差了不少。
（2）主频：STM32F1系列的单片机主频可以达到72M，而STC89系列的主频最高40M。
（3）存储：STM32F103C8T6内置256K的内部存储器和20K的内存，STC89C52RC内部存储器仅为8K，内存仅仅0.5K，根本不够存储本系统的逻辑代码。
（4）外设：STM32F103C8T6有8个16位的定时器，1个ADC、3个SPI接口，2个I2C接口，2个I2S接口，5个串口，1个USB接口和1个SDIO接口，为后续的功能扩展提供了强有力的的支持。STC89C52RC仅3个定时器，1个串口，最基本的ADC也没有，外设资源太过简单，因此选择了方案2。
```

语音识别智能垃圾分类器系统